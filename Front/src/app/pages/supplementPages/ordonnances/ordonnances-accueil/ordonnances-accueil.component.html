<app-header (changeDashEvent) = "changeDashState()" />

<div class="content">

  <!-- Dashboard visibility -->
  <div class="empty-dash">
    <app-dash-board *ngIf="isDashBoardVisible"></app-dash-board>
  </div>

  @defer {

  <div class="ordonnances-container">
      
        <h1>Liste des ordonnances </h1>
        <div *ngIf="ordonnances.length === 0" class="no-ordonnances">
          <p>Aucune ordonnance disponible pour le moment.</p>
        </div>
         <div *ngIf="ordonnances.length > 0" class="ordonnances-list">
          <ul>
            <li *ngFor="let ordonnance of ordonnances" class="ordonnance-item">   
              <div class="profile">
                <h3>Ordonnance ID: {{ ordonnance.id }}</h3>
                <p><strong>Date de création:</strong> {{ ordonnance.dateCreation}}</p>
                <p><strong>Durée:</strong> {{ordonnance.duree}}</p>
                <p class="etat-line"><strong>État: </strong>
                  <input type="checkbox" [(ngModel)]="ordonnance.etat" (ngModelChange)="toggleEtat(ordonnance)" />
                  <span>{{ ordonnance.etat ? 'valide' : 'non valide' }}</span>
                </p>
                <p><strong>Médicaments:</strong></p>
                <ul>
                  <div *ngIf="ordonnance.medicaments.length > 0" class ="medicaments-list">
                    <li *ngFor="let medicament of ordonnance.medicaments" class="medicament-item">
                      <div class="profile-medicament">
                        <p><strong>Nom:</strong> {{medicament.nom}}</p>
                        <p><strong>Dose:</strong> {{medicament.dose}}</p>
                        <p><strong>Fréquence:</strong> {{medicament.frequence}}</p>
                      </div>
                    </li>
                  </div>
                </ul>
              </div>
              <button>Ajouter un médicament</button>
            </li>
          </ul>
        </div>
        <button class="card-button" style="margin: auto;">Ajouter ordonnance</button>
  </div>

  } @loading (minimum 0.5s) { <!--Nesstennaw minimum 4s besh naffichiw @defer-->
    <div class="center-div">
      <app-loading-screen />
    </div>
  }
</div>

